# 智能家用植物养护IoT平台

------

## 目录

[TOC]
## 变更记录

| 修改人员 | 日期      | 变更原因 | 版本号 |
| -------- | --------- | -------- | ------ |
| 许杨     | 2021.4.14 | 最初草稿 | v1.0   |

## 1 引言

### 1.1 编制目的

本报告介绍了智能家用植物养护IoT平台的设计信息，达到指导后续软件构造的目的，同时实现和测试人员及用户的沟通。 

本报告面向开发人员、测试人员及最终用户而编写，是了解系统的导航。

## 2 产品描述

随着全国城市化的不断发展，家庭养生的观念深入人心，家庭种菜种花的现象变得十分常见，然而常见的家用种植方式往往会因为疏于管理和养护，导致植被的不良生长甚至死亡。

针对这样的情况我们打算设计一款可辅助植物生长的基于物联网云技术的家用植物养护应用，通过连接传感器，远程监控家用绿植的生长情况，并进行远程遥控，以解决以上存在的问题。

## 3 逻辑视角

植物养护IoT平台中使用了分层的体系结构风格，系统分为三层（展示层，业务逻辑层，数据层），能够很好地示意整个高层抽象。展示层包含UI界面的实现，业务逻辑层包含业务逻辑处理地实现，数据层负责提供数据访问和数据持久化。

## 4 组合视角

## 5 接口视角

## 6 信息视角

### 6.1 数据持久化对象

系统的主要Entitiy类如下所示：

- User

  - 用于记录平台的用户信息

  - | 列       | 描述     | 类型   | 备注     |
    | -------- | -------- | ------ | -------- |
    | id       | 用户id   | long   | 自增主键 |
    | password | 用户密码 | string |          |

- Device

  - 用于记录平台连接的设备信息

  - | 列        | 描述             | 类型   | 备注           |
    | --------- | ---------------- | ------ | -------------- |
    | device_id | 设备id           | long   | 自增主键       |
    | user_id   | 对应用户id       | long   | 外键，连接User |
    | type      | 设备类型         | string |                |
    | topic     | 设备对应MQTT主题 | string |                |

- Data

  - 用于记录设备上报的数据

  - | 列        | 描述         | 类型   | 备注                          |
    | --------- | ------------ | ------ | ----------------------------- |
    | id        | 数据id       | string | 主键</br>格式：time-device_id |
    | time      | 数据上报时间 | string |                               |
    | device_id | 设备id       | long   | 外键，连接Device              |
    | type      | 数据类型     | string |                               |
    | value     | 数值         | double |                               |

- Command

  - 用于记录设备上报的数据

  - | 列        | 描述         | 类型   | 备注                          |
    | --------- | ------------ | ------ | ----------------------------- |
    | id        | 数据id       | string | 主键</br>格式：time-device_id |
    | time      | 数据上报时间 | string |                               |
    | device_id | 设备id       | long   | 外键，连接Device              |
    | type      | 命令类型     | string |                               |
    | command   | 命令内容     | string |                               |